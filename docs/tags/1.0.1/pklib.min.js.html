<!DOCTYPE html>
<html>
<head>
  <title>pklib.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "tags/1.0.1/pklib.min.js", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>pklib.min.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>pklib JavaScript library v1.0.1
<a href='http://pklib.com/'>http://pklib.com/</a></p>
  </div>
  <div class="body"><p>Copyright (c) 2011</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES 
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

<p><a href='http://www.opensource.org/licenses/mit-license.php'>http://www.opensource.org/licenses/mit-license.php</a></p>

<p>Date: Tue Nov 01 2011 16:05:01 GMT+0100 (CEST)</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{</span><span class="nx">author</span><span class="o">:</span><span class="s2">&quot;Piotr Kowalski&quot;</span><span class="p">,</span><span class="nx">www</span><span class="o">:</span><span class="s2">&quot;http://pklib.com/&quot;</span><span class="p">,</span><span class="nx">version</span><span class="o">:</span><span class="s2">&quot;1.0.1&quot;</span><span class="p">};</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">ajax</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">client</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">settings</span><span class="o">=</span><span class="p">{},</span><span class="nx">cache</span><span class="o">=</span><span class="p">[];</span><span class="kd">function</span> <span class="nx">handler</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;responseText&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span><span class="o">===</span><span class="mi">4</span><span class="p">){</span><span class="nx">cache</span><span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="kd">var</span> <span class="nx">ct</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">),</span><span class="nx">xmlct</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;application/xml&quot;</span><span class="p">,</span><span class="s2">&quot;text/xml&quot;</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">ct</span><span class="p">,</span><span class="nx">xmlct</span><span class="p">)){</span><span class="nx">method</span><span class="o">=</span><span class="s2">&quot;responseXML&quot;</span><span class="p">;}</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="k">this</span><span class="p">[</span><span class="nx">method</span><span class="p">]);}}</span>
<span class="k">return</span><span class="p">{</span><span class="nx">load</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">){</span><span class="nx">client</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">settings</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;get&quot;</span><span class="p">,</span><span class="nx">async</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">cache</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">url</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">params</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">headers</span><span class="o">:</span><span class="p">{},</span><span class="nx">done</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){}};</span><span class="nx">settings</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">cache</span><span class="o">&amp;&amp;</span><span class="nx">cache</span><span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">]){</span><span class="nx">handler</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">]);}</span><span class="k">else</span><span class="p">{</span><span class="nx">client</span><span class="o">=</span><span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span><span class="nx">client</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">handler</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">client</span><span class="p">);};</span><span class="nx">client</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">async</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">headers</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">headers</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">)){</span><span class="nx">client</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="nx">item</span><span class="p">]);}}}</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">params</span><span class="p">);}}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">isArray</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span><span class="k">return</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="nx">obj</span><span class="o">!=</span><span class="kc">null</span><span class="o">&amp;&amp;</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="o">&amp;&amp;</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">slice</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="p">;},</span><span class="nx">inArray</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span><span class="nx">array</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">===</span><span class="nx">param</span><span class="p">){</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}}</span>
<span class="k">return</span> <span class="kc">false</span><span class="p">;},</span><span class="nx">unique</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">temp</span><span class="o">=</span><span class="p">[],</span><span class="nx">len</span><span class="o">=</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">item</span><span class="o">=</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inArray</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">item</span><span class="p">,</span><span class="nx">temp</span><span class="p">)</span><span class="o">===</span><span class="kc">false</span><span class="p">){</span><span class="nx">temp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);}}</span>
<span class="k">return</span> <span class="nx">temp</span><span class="p">;},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span><span class="kd">var</span> <span class="nx">params</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">params</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">param</span><span class="o">=</span><span class="nx">params</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="nx">inside</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span><span class="nx">array</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">inside</span><span class="o">!==</span><span class="kc">false</span><span class="p">){</span><span class="nx">array</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">inside</span><span class="p">,</span><span class="mi">1</span><span class="p">);}}</span>
<span class="k">return</span> <span class="nx">array</span><span class="p">;},</span><span class="nx">mixin</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">source</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">source</span><span class="p">)){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">element</span><span class="o">=</span><span class="nx">source</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">target</span><span class="p">)){</span><span class="nx">target</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">element</span><span class="p">);}}</span>
<span class="k">return</span> <span class="nx">target</span><span class="p">.</span><span class="nx">sort</span><span class="p">();}</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">source</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">)){</span><span class="nx">target</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span><span class="o">=</span><span class="nx">source</span><span class="p">[</span><span class="nx">item</span><span class="p">];}}</span>
<span class="k">return</span> <span class="nx">target</span><span class="p">;}}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">aspect</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">fun</span><span class="p">,</span><span class="nx">asp</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fun</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">asp</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;Params are not functions&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">that</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="nx">asp</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">that</span><span class="p">);</span><span class="k">return</span> <span class="nx">fun</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);};};</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">browser</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">browsers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;msie&quot;</span><span class="p">,</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span><span class="s2">&quot;safari&quot;</span><span class="p">,</span><span class="s2">&quot;opera&quot;</span><span class="p">,</span><span class="s2">&quot;mozilla&quot;</span><span class="p">,</span><span class="s2">&quot;konqueror&quot;</span><span class="p">];</span><span class="k">return</span><span class="p">{</span><span class="nx">getName</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">userAgent</span><span class="o">=</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">browsers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">browser</span><span class="o">=</span><span class="nx">browsers</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">browser</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">userAgent</span><span class="p">)){</span><span class="k">return</span> <span class="nx">browser</span><span class="p">;}}},</span><span class="nx">getVersion</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">userAgent</span><span class="o">=</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">browsers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">browser</span><span class="o">=</span><span class="nx">browsers</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="nx">cur</span><span class="o">=</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">browser</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">cur</span><span class="o">!=-</span><span class="mi">1</span><span class="p">){</span><span class="k">return</span> <span class="nx">userAgent</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">cur</span><span class="o">+</span><span class="nx">len</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);}}}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">cookie</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">create</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">value</span><span class="p">,</span><span class="nx">days</span><span class="p">){</span><span class="nx">value</span><span class="o">=</span><span class="nx">value</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">expires</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">days</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">date</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span><span class="o">+</span><span class="p">(</span><span class="nx">days</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">1000</span><span class="p">));</span><span class="nx">expires</span><span class="o">=</span><span class="s2">&quot;; expires=&quot;</span><span class="o">+</span><span class="nx">date</span><span class="p">.</span><span class="nx">toGMTString</span><span class="p">();}</span>
<span class="nx">doc</span><span class="p">.</span><span class="nx">cookie</span><span class="o">=</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;=&quot;</span><span class="o">+</span><span class="nx">value</span><span class="o">+</span><span class="nx">expires</span><span class="o">+</span><span class="s2">&quot;; path=/&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">name</span><span class="p">);},</span><span class="nx">read</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="nx">name</span><span class="o">=</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;=&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">ca</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">ca</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">ca</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">while</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot; &quot;</span><span class="p">){</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">);}}},</span><span class="nx">erase</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="kc">undefined</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">css</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">addClass</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">element</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="o">||</span><span class="nx">element</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">cssClass</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.css.addClass: Element is undefined/null or cssClass is undefined&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">classElement</span><span class="o">=</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">element</span><span class="p">)){</span><span class="k">if</span><span class="p">(</span><span class="nx">classElement</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span><span class="nx">classElement</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="nx">classElement</span><span class="o">=</span><span class="nx">cssClass</span><span class="p">;}}</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">classElement</span><span class="p">;},</span><span class="nx">removeClass</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">element</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="o">||</span><span class="nx">element</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">cssClass</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.css.removeClass: Element is undefined/null or cssClass is undefined&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">regexp</span><span class="o">=</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(\s&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="o">+</span><span class="s2">&quot;)|(&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="o">+</span><span class="s2">&quot;\s)|&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="p">,</span><span class="s2">&quot;i&quot;</span><span class="p">);</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">regexp</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);},</span><span class="nx">hasClass</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">element</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="o">||</span><span class="nx">element</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">cssClass</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.css.hasClass: Element is undefined/null or cssClass is undefined&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">regexp</span><span class="o">=</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(\s&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="o">+</span><span class="s2">&quot;)|(&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="o">+</span><span class="s2">&quot;\s)|&quot;</span><span class="o">+</span><span class="nx">cssClass</span><span class="p">,</span><span class="s2">&quot;i&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">);}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">,</span><span class="nx">walk_the_dom</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span><span class="nx">func</span><span class="p">){</span><span class="nx">func</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span><span class="nx">node</span><span class="o">=</span><span class="nx">node</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span><span class="k">while</span><span class="p">(</span><span class="nx">node</span><span class="p">){</span><span class="nx">walk_the_dom</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span><span class="nx">func</span><span class="p">);</span><span class="nx">node</span><span class="o">=</span><span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;}};</span><span class="k">return</span><span class="p">{</span><span class="nx">nodeTypes</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;ELEMENT_NODE&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;ATTRIBUTE_NODE&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;TEXT_NODE&quot;</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;CDATA_SECTION_NODE&quot;</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;ENTITY_REFERENCE_NODE&quot;</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;ENTITY_NODE&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;PROCESSING_INSTRUCTION_NODE&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span><span class="s2">&quot;COMMENT_NODE&quot;</span><span class="o">:</span><span class="mi">8</span><span class="p">,</span><span class="s2">&quot;DOCUMENT_NODE&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span><span class="s2">&quot;DOCUMENT_TYPE_NODE&quot;</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span><span class="s2">&quot;DOCUMENT_FRAGMENT_NODE&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span><span class="s2">&quot;NOTATION_NODE&quot;</span><span class="o">:</span><span class="mi">12</span><span class="p">},</span><span class="nx">isNode</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span><span class="k">return</span> <span class="nx">element</span><span class="o">&amp;&amp;</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeType</span><span class="o">&amp;&amp;</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span><span class="o">||</span><span class="kc">null</span><span class="p">;},</span><span class="nx">byId</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="nx">container</span><span class="o">=</span><span class="nx">container</span><span class="o">||</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">);},</span><span class="nx">byTag</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="nx">container</span><span class="o">=</span><span class="nx">container</span><span class="o">||</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">tag</span><span class="p">);},</span><span class="nx">byClass</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="nx">container</span><span class="o">=</span><span class="nx">container</span><span class="o">||</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">){</span><span class="k">return</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">results</span><span class="o">=</span><span class="p">[];</span><span class="nx">walk_the_dom</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">cssClass</span><span class="p">,</span><span class="nx">node</span><span class="p">)){</span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);}});</span><span class="k">return</span> <span class="nx">results</span><span class="p">;}},</span><span class="nx">index</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span><span class="kd">var</span> <span class="nx">parent</span><span class="o">=</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span><span class="nx">elements</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">item</span><span class="o">=</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="o">===</span><span class="nx">element</span><span class="p">){</span><span class="k">return</span> <span class="nx">i</span><span class="p">;}}</span>
<span class="k">return</span> <span class="kc">null</span><span class="p">;},</span><span class="nx">children</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span><span class="kd">var</span> <span class="nx">array</span><span class="o">=</span><span class="p">[],</span><span class="nx">childs</span><span class="o">=</span><span class="nx">element</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">childs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">childs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span><span class="o">===</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeTypes</span><span class="p">.</span><span class="nx">ELEMENT_NODE</span><span class="p">){</span><span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">childs</span><span class="p">[</span><span class="nx">i</span><span class="p">]);}}</span>
<span class="k">return</span> <span class="nx">array</span><span class="p">;},</span><span class="nx">center</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="kd">var</span> <span class="nx">left</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">top</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">container</span><span class="o">===</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">){</span><span class="nx">left</span><span class="o">=</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">))</span><span class="o">-</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="s2">&quot;width&quot;</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="nx">top</span><span class="o">=</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">))</span><span class="o">-</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="s2">&quot;height&quot;</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="nx">left</span><span class="o">=</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">)</span><span class="o">-</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="s2">&quot;width&quot;</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="nx">top</span><span class="o">=</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span><span class="o">-</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="s2">&quot;height&quot;</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;}</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">left</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">;</span><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">top</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">;</span><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;absolute&quot;</span><span class="p">;</span><span class="k">return</span><span class="p">[</span><span class="nx">left</span><span class="p">,</span><span class="nx">top</span><span class="p">];},</span><span class="nx">maximize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="kd">var</span> <span class="nx">width</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">height</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">container</span><span class="o">===</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">){</span><span class="nx">width</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">));</span><span class="nx">height</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span><span class="o">===</span><span class="s2">&quot;msie&quot;</span><span class="p">){</span><span class="nx">width</span><span class="o">-=</span><span class="mi">20</span><span class="p">;}}</span><span class="k">else</span><span class="p">{</span><span class="nx">width</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span><span class="s2">&quot;width&quot;</span><span class="p">);</span><span class="nx">height</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span><span class="s2">&quot;height&quot;</span><span class="p">);}</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">width</span><span class="p">;</span><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">height</span><span class="p">;</span><span class="k">return</span><span class="p">[</span><span class="nx">width</span><span class="p">,</span><span class="nx">height</span><span class="p">];},</span><span class="nx">insert</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">container</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isNode</span><span class="p">(</span><span class="nx">element</span><span class="p">)){</span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="p">){</span><span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">+=</span><span class="nx">element</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">element</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">add</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">){</span><span class="nx">bubbles</span><span class="o">=</span><span class="nx">bubbles</span><span class="o">||</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">){</span><span class="nx">target</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="o">+</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">);}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">){</span><span class="nx">target</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">);}},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">){</span><span class="nx">target</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="o">+</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">);</span><span class="k">return</span> <span class="kc">true</span><span class="p">;};}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">){</span><span class="nx">bubbles</span><span class="o">=</span><span class="nx">bubbles</span><span class="o">||</span><span class="kc">false</span><span class="p">;</span><span class="nx">target</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">);</span><span class="k">return</span> <span class="kc">true</span><span class="p">;};}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">eventType</span><span class="p">,</span><span class="nx">callback</span><span class="p">,</span><span class="nx">bubbles</span><span class="p">);}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">file</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">load</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span><span class="nx">callback</span><span class="p">){</span><span class="kd">var</span> <span class="nx">script</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span><span class="nx">script</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="p">;</span><span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">src</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span><span class="p">){</span><span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span><span class="o">===</span><span class="s2">&quot;loaded&quot;</span><span class="o">||</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span><span class="o">===</span><span class="s2">&quot;complete&quot;</span><span class="p">){</span><span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kc">null</span><span class="p">;(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">(</span><span class="nx">script</span><span class="p">);}};}</span><span class="k">else</span><span class="p">{</span><span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="kd">function</span><span class="p">(){(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">(</span><span class="nx">script</span><span class="p">);};}</span>
<span class="nx">doc</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">glass</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">,</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;pklib-glass-wrapper&quot;</span><span class="p">,</span><span class="nx">settings</span><span class="o">=</span><span class="p">{</span><span class="nx">container</span><span class="o">:</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="p">{</span><span class="nx">position</span><span class="o">:</span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">top</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">background</span><span class="o">:</span><span class="s2">&quot;#000&quot;</span><span class="p">,</span><span class="nx">opacity</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">zIndex</span><span class="o">:</span><span class="mi">1000</span><span class="p">}};</span><span class="k">return</span><span class="p">{</span><span class="nx">objId</span><span class="o">:</span><span class="nx">id</span><span class="p">,</span><span class="nx">show</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="nx">callback</span><span class="p">){</span><span class="kd">var</span> <span class="nx">that</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">glass</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span><span class="nx">glassStyle</span><span class="o">=</span><span class="nx">glass</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span><span class="nx">settings</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">filter</span><span class="o">=</span><span class="s2">&quot;alpha(opacity=&quot;</span><span class="o">+</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">;</span><span class="nx">glass</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">style</span> <span class="k">in</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">style</span><span class="p">)){</span><span class="nx">glassStyle</span><span class="p">[</span><span class="nx">style</span><span class="p">]</span><span class="o">=</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">style</span><span class="p">];}}</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">glass</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">maximize</span><span class="p">(</span><span class="nx">glass</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">that</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span><span class="nx">that</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="nx">callback</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">maximize</span><span class="p">(</span><span class="nx">glass</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);});(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">return</span> <span class="nx">glass</span><span class="p">;},</span><span class="nx">close</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span><span class="kd">var</span> <span class="nx">glass</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">),</span><span class="nx">result</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">glass</span><span class="o">!==</span><span class="kc">null</span><span class="p">){</span><span class="nx">glass</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">glass</span><span class="p">);</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span><span class="nx">result</span><span class="o">=</span><span class="kc">true</span><span class="p">;}</span>
<span class="p">(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">return</span> <span class="nx">result</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">json</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">stringify</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span><span class="nx">ind</span><span class="p">){</span><span class="kd">var</span> <span class="nx">source</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">index</span><span class="o">=</span><span class="nx">ind</span><span class="o">||</span><span class="mi">0</span><span class="p">;</span><span class="kd">function</span> <span class="nx">indent</span><span class="p">(</span><span class="nx">len</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">preffix</span><span class="o">=</span><span class="s2">&quot;\t&quot;</span><span class="p">,</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="nx">source</span><span class="o">+=</span><span class="nx">preffix</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">source</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">return</span> <span class="kc">undefined</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;boolean&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span><span class="p">;</span><span class="k">return</span> <span class="nx">object</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;number&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">;</span><span class="k">return</span> <span class="nx">object</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">;</span><span class="k">return</span><span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="nx">object</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">;</span><span class="kd">function</span> <span class="nx">__getName</span><span class="p">(</span><span class="nx">fun</span><span class="p">){</span><span class="kd">var</span> <span class="nx">text</span><span class="o">=</span><span class="nx">fun</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span><span class="nx">text</span><span class="o">=</span><span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;function &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">text</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;()&quot;</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">__getName</span><span class="p">(</span><span class="nx">object</span><span class="p">);}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="k">typeof</span> <span class="nx">object</span><span class="p">.</span><span class="nx">slice</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;array&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;[]&quot;</span><span class="p">;}</span>
<span class="nx">source</span><span class="o">=</span><span class="s2">&quot;[\n&quot;</span><span class="o">+</span><span class="nx">indent</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span><span class="nx">index</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="nx">source</span><span class="o">+=</span><span class="nx">indent</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="o">+</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="nx">index</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">!==</span><span class="nx">len</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span><span class="nx">source</span><span class="o">+=</span><span class="s2">&quot;,\n&quot;</span><span class="p">;}}</span>
<span class="nx">index</span><span class="o">--</span><span class="p">;</span><span class="nx">source</span><span class="o">+=</span><span class="s2">&quot;\n&quot;</span><span class="o">+</span><span class="nx">indent</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="p">;}</span><span class="k">else</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">){</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">;</span><span class="kd">function</span> <span class="nx">__getLast</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">object</span><span class="p">){}</span>
<span class="k">return</span> <span class="nx">i</span><span class="p">;}</span>
<span class="nx">source</span><span class="o">=</span><span class="s2">&quot;{\n&quot;</span><span class="p">;</span><span class="nx">index</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">object</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">)){</span><span class="nx">source</span><span class="o">+=</span><span class="nx">indent</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="nx">item</span><span class="o">+</span><span class="s1">&#39;&quot;: &#39;</span><span class="o">+</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">item</span><span class="p">],</span><span class="nx">index</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="o">!==</span><span class="nx">__getLast</span><span class="p">(</span><span class="nx">object</span><span class="p">)){</span><span class="nx">source</span><span class="o">+=</span><span class="s2">&quot;,\n&quot;</span><span class="p">;}}}</span>
<span class="nx">index</span><span class="o">--</span><span class="p">;</span><span class="nx">source</span><span class="o">+=</span><span class="s2">&quot;\n&quot;</span><span class="o">+</span><span class="nx">indent</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">source</span><span class="p">;},</span><span class="nx">serialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="nx">toJson</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">source</span><span class="o">!==</span><span class="s2">&quot;object&quot;</span><span class="o">||</span><span class="nx">source</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.json.serialize: Source is null or not object&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">amp</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span><span class="nx">response</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="nx">toJson</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">response</span><span class="o">+=</span><span class="s2">&quot;{&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">source</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">)){(</span><span class="nx">amp</span><span class="p">)</span><span class="o">?</span><span class="nx">response</span><span class="o">+=</span><span class="nx">toJson</span><span class="o">?</span><span class="s1">&#39;,&#39;</span><span class="o">:</span><span class="s1">&#39;&amp;&#39;</span><span class="o">:</span><span class="p">(</span><span class="nx">amp</span><span class="o">=</span><span class="kc">true</span><span class="p">);</span><span class="kd">var</span> <span class="nx">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">source</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="o">&amp;&amp;</span><span class="nx">source</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span><span class="o">!==</span><span class="kc">null</span><span class="p">){</span><span class="nx">value</span><span class="o">=</span><span class="nx">source</span><span class="p">[</span><span class="nx">item</span><span class="p">];}</span>
<span class="kd">var</span> <span class="nx">mtz</span><span class="o">=</span><span class="nx">toJson</span><span class="o">?</span><span class="s1">&#39;&quot;&#39;</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="nx">response</span><span class="o">+=</span><span class="nx">item</span><span class="p">;</span><span class="nx">response</span><span class="o">+=</span><span class="nx">toJson</span><span class="o">?</span><span class="s1">&#39;:&#39;</span><span class="o">:</span><span class="s1">&#39;=&#39;</span><span class="p">;</span><span class="nx">response</span><span class="o">+=</span><span class="nx">mtz</span><span class="p">;</span><span class="nx">response</span><span class="o">+=</span><span class="nx">value</span><span class="o">+</span><span class="nx">mtz</span><span class="p">;}}</span>
<span class="nx">toJson</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">response</span><span class="o">+=</span><span class="s2">&quot;}&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">response</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">loader</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">,</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;pklib-loader-wrapper&quot;</span><span class="p">,</span><span class="nx">settings</span><span class="o">=</span><span class="p">{</span><span class="nx">src</span><span class="o">:</span><span class="s2">&quot;http://pklib.com/img/icons/loader.gif&quot;</span><span class="p">,</span><span class="nx">container</span><span class="o">:</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="p">{</span><span class="nx">width</span><span class="o">:</span><span class="mi">31</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="mi">31</span><span class="p">,</span><span class="nx">zIndex</span><span class="o">:</span><span class="mi">1010</span><span class="p">},</span><span class="nx">center</span><span class="o">:</span><span class="kc">true</span><span class="p">};</span><span class="k">return</span><span class="p">{</span><span class="nx">objId</span><span class="o">:</span><span class="nx">id</span><span class="p">,</span><span class="nx">show</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="nx">callback</span><span class="p">){</span><span class="nx">settings</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span><span class="kd">var</span> <span class="nx">loader</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">),</span><span class="nx">loaderStyle</span><span class="o">=</span><span class="nx">loader</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span><span class="nx">loader</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">);</span><span class="nx">loader</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">src</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">style</span> <span class="k">in</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">style</span><span class="p">)){</span><span class="nx">loaderStyle</span><span class="p">[</span><span class="nx">style</span><span class="p">]</span><span class="o">=</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">style</span><span class="p">];}}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">center</span><span class="p">){</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">center</span><span class="p">(</span><span class="nx">loader</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">center</span><span class="p">(</span><span class="nx">loader</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);});}</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">loader</span><span class="p">);(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">delete</span> <span class="nx">loader</span><span class="p">;},</span><span class="nx">close</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span><span class="kd">var</span> <span class="nx">loader</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">),</span><span class="nx">result</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">loader</span><span class="o">!==</span><span class="kc">null</span><span class="p">){</span><span class="nx">loader</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">loader</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span><span class="nx">result</span><span class="o">=</span><span class="kc">true</span><span class="p">;}</span>
<span class="p">(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">return</span> <span class="nx">result</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">message</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">,</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;pklib-message-wrapper&quot;</span><span class="p">,</span><span class="nx">contents</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">settings</span><span class="o">=</span><span class="p">{</span><span class="nx">container</span><span class="o">:</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="p">{</span><span class="nx">width</span><span class="o">:</span><span class="mi">300</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="mi">300</span><span class="p">,</span><span class="nx">zIndex</span><span class="o">:</span><span class="mi">1010</span><span class="p">}};</span><span class="k">return</span><span class="p">{</span><span class="nx">objId</span><span class="o">:</span><span class="nx">id</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="nx">contents</span><span class="p">,</span><span class="nx">show</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="nx">callback</span><span class="p">){</span><span class="nx">settings</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span><span class="kd">var</span> <span class="nx">message</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span><span class="nx">messageStyle</span><span class="o">=</span><span class="nx">message</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span><span class="nx">message</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">style</span> <span class="k">in</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">style</span><span class="p">)){</span><span class="nx">messageStyle</span><span class="p">[</span><span class="nx">style</span><span class="p">]</span><span class="o">=</span><span class="nx">settings</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">style</span><span class="p">];}}</span>
<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="p">){</span><span class="nx">message</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">;}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">){</span><span class="nx">message</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">);}</span>
<span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">center</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">center</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="nx">settings</span><span class="p">.</span><span class="nx">container</span><span class="p">);});(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">return</span> <span class="nx">message</span><span class="p">;},</span><span class="nx">close</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span><span class="kd">var</span> <span class="nx">message</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">objId</span><span class="p">),</span><span class="nx">result</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">message</span><span class="o">!==</span><span class="kc">null</span><span class="p">){</span><span class="nx">message</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span><span class="nx">result</span><span class="o">=</span><span class="kc">true</span><span class="p">;}</span>
<span class="p">(</span><span class="k">typeof</span> <span class="nx">callback</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">callback</span><span class="p">();</span><span class="k">return</span> <span class="nx">result</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">profiler</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">data</span><span class="o">=</span><span class="p">{};</span><span class="k">return</span><span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="k">return</span> <span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">];},</span><span class="nx">stop</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span><span class="o">-</span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span><span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">((</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">()</span><span class="o">+</span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]);},</span><span class="nx">getTime</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">return</span> <span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">];}};})();</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="o">=</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="o">||</span><span class="kd">function</span><span class="p">(</span><span class="nx">oThis</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;Function.prototype.bind - what is trying to be fBound is not callable&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">aArgs</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">fToBind</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">fNOP</span><span class="o">=</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">fBound</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">fToBind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">fNOP</span><span class="o">?</span><span class="k">this</span><span class="o">:</span><span class="nx">oThis</span><span class="o">||</span><span class="nb">window</span><span class="p">,</span><span class="nx">aArgs</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));};</span><span class="nx">fNOP</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="nx">fBound</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">fNOP</span><span class="p">();</span><span class="k">return</span> <span class="nx">fBound</span><span class="p">;};</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMethod</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">func</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="nx">func</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">string</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">isString</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">return</span> <span class="k">typeof</span> <span class="nx">source</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="p">;},</span><span class="nx">isLetter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">return</span> <span class="k">typeof</span> <span class="nx">source</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="sr">/^[a-zA-Z]$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">source</span><span class="p">);},</span><span class="nx">trim</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">return</span> <span class="nx">source</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+|\s+$/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);},</span><span class="nx">slug</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="kd">var</span> <span class="nx">result</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/mg</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">);</span><span class="nx">result</span><span class="o">=</span><span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^a-zA-Z0-9\-]/mg</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">ch</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">ch</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">()){</span><span class="k">case</span> <span class="mi">261</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">97</span><span class="p">);</span><span class="k">case</span> <span class="mi">281</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">101</span><span class="p">);</span><span class="k">case</span> <span class="mi">243</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">111</span><span class="p">);</span><span class="k">case</span> <span class="mi">347</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">115</span><span class="p">);</span><span class="k">case</span> <span class="mi">322</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">108</span><span class="p">);</span><span class="k">case</span> <span class="mi">378</span><span class="o">:</span><span class="k">case</span> <span class="mi">380</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">122</span><span class="p">);</span><span class="k">case</span> <span class="mi">263</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">99</span><span class="p">);</span><span class="k">case</span> <span class="mi">324</span><span class="o">:</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">110</span><span class="p">);</span><span class="k">default</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">;}});</span><span class="k">return</span> <span class="nx">result</span><span class="p">;},</span><span class="nx">capitalize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">return</span> <span class="nx">source</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="o">+</span><span class="nx">source</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">source</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();},</span><span class="nx">delimiterSeparatedWords</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">return</span> <span class="nx">source</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[A-Z]/g</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">match</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();});},</span><span class="nx">camelCase</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span><span class="k">while</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">){</span><span class="kd">var</span> <span class="nx">pos</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">),</span><span class="nx">pre</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">pos</span><span class="p">),</span><span class="nx">sub</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">pos</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">(),</span><span class="nx">post</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">pos</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span><span class="nx">source</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span><span class="nx">source</span><span class="o">=</span><span class="nx">pre</span><span class="o">+</span><span class="nx">sub</span><span class="o">+</span><span class="nx">post</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">source</span><span class="p">;},</span><span class="nx">slice</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="nx">len</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">num</span><span class="o">=</span><span class="nx">source</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">item</span><span class="o">&lt;</span><span class="nx">num</span><span class="p">;</span><span class="o">++</span><span class="nx">item</span><span class="p">){</span><span class="nx">text</span><span class="o">+=</span><span class="nx">source</span><span class="p">[</span><span class="nx">item</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="o">==</span><span class="nx">len</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">num</span><span class="o">-</span><span class="nx">len</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">){</span><span class="nx">text</span><span class="o">+=</span><span class="s2">&quot;...&quot;</span><span class="p">;}</span>
<span class="k">break</span><span class="p">;}}</span>
<span class="k">return</span> <span class="nx">text</span><span class="p">;}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">utils</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">doc</span><span class="o">=</span><span class="nb">document</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">size</span><span class="o">:</span><span class="p">{</span><span class="nb">window</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.utils.size.window: Parameter name is mandatory&quot;</span><span class="p">);}</span>
<span class="nx">name</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span><span class="kd">var</span> <span class="nx">win</span><span class="o">=</span><span class="nb">window</span><span class="p">,</span><span class="nx">clientName</span><span class="o">=</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;client&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">];</span><span class="k">return</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span><span class="o">===</span><span class="s2">&quot;CSS1Compat&quot;</span><span class="o">&amp;&amp;</span><span class="nx">clientName</span><span class="o">||</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;client&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">]</span><span class="o">||</span><span class="nx">clientName</span><span class="p">;},</span><span class="nb">document</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.utils.size.document: Parameter name is mandatory&quot;</span><span class="p">);}</span>
<span class="nx">name</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span><span class="kd">var</span> <span class="nx">clientName</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;client&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">scrollBodyName</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">scrollName</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">offsetBodyName</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">offsetName</span><span class="o">=</span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">];</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">clientName</span><span class="p">,</span><span class="nx">scrollBodyName</span><span class="p">,</span><span class="nx">scrollName</span><span class="p">,</span><span class="nx">offsetBodyName</span><span class="p">,</span><span class="nx">offsetName</span><span class="p">);},</span><span class="nx">object</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="nx">name</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">obj</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.utils.size.object: Parameter name is mandatory&quot;</span><span class="p">);}</span>
<span class="nx">name</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span><span class="kd">var</span> <span class="nx">client</span><span class="o">=</span><span class="nx">obj</span><span class="p">[</span><span class="s2">&quot;client&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">scroll</span><span class="o">=</span><span class="nx">obj</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">],</span><span class="nx">offset</span><span class="o">=</span><span class="nx">obj</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="o">+</span><span class="nx">name</span><span class="p">];</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="nx">scroll</span><span class="p">,</span><span class="nx">offset</span><span class="p">);}},</span><span class="nx">ascii</span><span class="o">:</span><span class="p">{</span><span class="nx">letters</span><span class="o">:</span><span class="p">{</span><span class="nx">lower</span><span class="o">:</span><span class="p">[</span><span class="mi">113</span><span class="p">,</span><span class="mi">119</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">114</span><span class="p">,</span><span class="mi">116</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">117</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">112</span><span class="p">,</span><span class="mi">97</span><span class="p">,</span><span class="mi">115</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">107</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">98</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">109</span><span class="p">],</span><span class="nx">upper</span><span class="o">:</span><span class="p">[</span><span class="mi">81</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">82</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">73</span><span class="p">,</span><span class="mi">79</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">68</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">74</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">67</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">77</span><span class="p">]}},</span><span class="nx">date</span><span class="o">:</span><span class="p">{</span><span class="nx">getFullMonth</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">month</span><span class="o">=</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getMonth</span><span class="p">(),</span><span class="mi">10</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span><span class="p">(</span><span class="nx">month</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;0&quot;</span><span class="o">+</span><span class="nx">month</span><span class="o">:</span><span class="nx">month</span><span class="p">;}},</span><span class="nx">action</span><span class="o">:</span><span class="p">{</span><span class="nx">clearfocus</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">===</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;}});</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&quot;blur&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">===</span><span class="s2">&quot;&quot;</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;}});}},</span><span class="nx">outerlink</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">area</span><span class="p">){</span><span class="nx">area</span><span class="o">=</span><span class="nx">area</span><span class="o">||</span><span class="nx">doc</span><span class="p">;</span><span class="kd">var</span> <span class="nx">links</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byTag</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">len</span><span class="o">=</span><span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">link</span><span class="o">=</span><span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">link</span><span class="p">.</span><span class="nx">rel</span><span class="o">===</span><span class="s2">&quot;outerlink&quot;</span><span class="p">){</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">link</span><span class="p">,</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();});}}},</span><span class="nx">confirm</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">text</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">element</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="nx">text</span><span class="o">=</span><span class="nx">text</span><span class="o">||</span><span class="s2">&quot;Sure?&quot;</span><span class="p">;</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span><span class="kd">var</span> <span class="nx">response</span><span class="o">=</span><span class="nx">confirm</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="o">===</span><span class="nx">response</span><span class="p">){</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();}});}}},</span><span class="nx">scrollTo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span><span class="nx">animate</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="o">===</span><span class="nx">animate</span><span class="p">){</span><span class="kd">var</span> <span class="nx">interval</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">interval</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">-=</span><span class="mi">5</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">){</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);}},</span><span class="mi">1</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">param</span><span class="p">;}}};})();</span><span class="nx">pklib</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pklib</span><span class="o">||</span><span class="p">{};</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">validate</span><span class="o">=</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">empty</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">object</span><span class="p">)){</span><span class="k">return</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="k">switch</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;string&quot;</span><span class="o">:</span><span class="k">return</span><span class="p">(</span><span class="nx">object</span><span class="o">===</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;number&quot;</span><span class="o">:</span><span class="k">return</span><span class="p">(</span><span class="nx">object</span><span class="o">===</span><span class="mi">0</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;object&quot;</span><span class="o">:</span><span class="kd">var</span> <span class="nx">iterator</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">object</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">)){</span><span class="nx">iterator</span><span class="o">++</span><span class="p">;}}</span>
<span class="k">return</span><span class="p">(</span><span class="nx">iterator</span><span class="o">===</span><span class="mi">0</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;undefined&quot;</span><span class="o">:</span><span class="p">}</span>
<span class="k">return</span> <span class="kc">false</span><span class="p">;}},</span><span class="nx">regexp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">){</span><span class="kd">var</span> <span class="nx">settings</span><span class="o">=</span><span class="p">{</span><span class="nx">object</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">regexp</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(){}};</span><span class="nx">settings</span><span class="o">=</span><span class="nx">pklib</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span><span class="nx">config</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regexp</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.validate.regexp: Regular expressino is neeeded&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">exp</span><span class="o">=</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regexp</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">object</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;pklib.validate.regexp: Object is neeeded&quot;</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">exp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">object</span><span class="p">)){</span><span class="k">return</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">success</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">settings</span><span class="p">.</span><span class="nx">success</span><span class="p">();}</span>
<span class="k">return</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">();}};})();</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
